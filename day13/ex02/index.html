<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>우리는 모두 친구</h1>
    <h1>피카츄 라이츄 파이리 꼬부기(setTimeOut, setInterval)</h1>
    <h1>버터풀 야도란 피죤투 또가스(Promise)</h1>
    <div id="box"></div>
    <script>
      const box = document.querySelector("#box");

      function addMsg(container, text) {
        const msg = document.createElement("p");
        msg.textContent = text;
        container.appendChild(msg);
      }
      const p = new Promise((resolve, reject) => {
        setTimeout(() => {
          const value = Math.random();
          if (value > 0.5) {
            // const msg = document.createElement("p");
            // msg.textContent = "성공!";
            // container.appendChild(msg);
            addMsg(box, "성공");
            resolve(value);
          } else {
            addMsg(box, "실패");
            reject(value);
          }
        }, 1000); // pending, async-await로 보통 해결결
      });
      //   p.then(() => console.log(1))
      //     .then(() => console.log(2))
      //     .then(() => console.log(3)); // ()=> 콜백 // then 성공했을 때

      //   p.then((value) => console.log(value, 1)) // 랜덤값 받아옴옴
      //     .then(() => console.log(2))
      //     .then(() => console.log(3));

      //   p.then((value) => console.log(value, 1)) // 랜덤값 받아옴옴
      //     .then(() => console.log(2))
      //     .then(() => console.log(3))
      //     .catch(() => console.log(-1));

      p.then((value) => console.log(value, 1)) // 랜덤값 받아옴옴
        .then(() => console.log(2))
        .then(() => console.log(3))
        .catch((error) => console.log(error, -1)); // throw도 가능
      // Promise... -> 경쟁조건, 병렬 실행 같은 거 안해도 됨(리액트, 타입스크립트 안할 거면)
    </script>
  </body>
</html>
