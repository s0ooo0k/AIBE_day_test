<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BOMì˜ MEMO</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Archivo+Narrow:ital,wght@0,400..700;1,400..700&family=Noto+Sans+KR:wght@100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap");
    </style>
    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      href="./favicon/favicon-96x96.png"
      sizes="96x96"
    />
    <link rel="icon" type="image/svg+xml" href="./favicon/favicon.svg" />
    <link rel="shortcut icon" href="./favicon/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./favicon/apple-touch-icon.png"
    />
    <link rel="manifest" href="./favicon/site.webmanifest" />
    <!-- OG Image -->
    <meta property="og:title" content="MEMOì¥ì´ í•„ìš”í•˜ì‹ ê°€ìš”? ğŸ“" />
    <meta property="og:description" content="BOMì´ë€ ë¬´ì—‡ì¸ê°€" />
    <meta
      property="og:image"
      content="https://raw.githubusercontent.com/s0ooo0k/AIBE_day_test/refs/heads/main/day11/BOM/draw.jpg"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div>
      <h1>MEMO</h1>
    </div>
    <!-- 1ë‹¨ê³„ : ìƒ‰ìƒì„ í•˜ë‚˜ ì„ íƒí•´ì„œ ë©”ëª¨ë¥¼ í•˜ë‚˜ ì¶”ê°€ -->
    <!-- 2ë‹¨ê³„ : formì— ì¸í’‹ì„ ë„£ì–´ì„œ ë³€í™”í•  ìˆ˜ ìˆê²Œ í•¨-->
    <div class="form-body">
      <form id="controller" class="form-style">
        <!-- labelì€ íŠ¹ì •í•œ inputì— ì´ë¦„í‘œë¥¼ ë‹¬ì•„ì£¼ê³ , clickì‹œ í•´ë‹¹ inputì— í¬ì»¤ìŠ¤ë¥¼ ì£¼ëŠ” ê¸°ëŠ¥.
             1) ë¼ë²¨ë¡œ ì¸í’‹ì„ ê°ì‹¼ë‹¤ (ìƒí•˜ìœ„)
             2) for-id -->
        <label for="">
          ë©”ëª¨ ë‚´ìš©ì„ ì‘ì„±í•˜ì„¸ìš”!
          <input id="memoText" name="memoText" type="text" />
        </label>
        <label for="">
          ë°°ê²½ ìƒ‰ìƒì„ ì„ íƒí•˜ì„¸ìš”!
          <input
            id="memoBgColor"
            name="memoBgColor"
            type="color"
            value="#ece6a0"
          />
        </label>
        <button>ë§Œë“¤ê¸°</button>
      </form>
    </div>
    <section id="view"></section>

    <script>
      // 5ë‹¨ê³„ ë©”ëª¨ ë°ì´í„° ë³´í˜¸í•˜ê¸°
      // 6ë‹¨ê³„ ë©”ëª¨ ë³´ì¡´í•˜ê¸°
      function onload() {
        // í•¨ìˆ˜ëŠ” í˜¸ì¶œë§Œ ê°€ëŠ¥í•˜ë‹¤ -> ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.
        // ê°œë°œì ë„êµ¬ì—ì„œ ì ‘ê·¼ ë¶ˆê°€!
        // Math.randomì„ ë°”íƒ•ìœ¼ë¡œ hexë¥¼ ìƒì„±í•˜ë˜ ë°°ê²½ìƒ‰ìœ¼ë¡œ ì ì ˆí•œ ì˜…ì€ hex ìƒ‰ìƒì„ ìƒì„±í•˜ëŠ” ìµëª…í•¨ìˆ˜
        function goodBgColor() {
          return `#${[...Array(3)]
            .map(() => Math.floor(Math.random() * 56) + 200)
            .map((v) => v.toString(16).padStart(2, "0"))
            .join("")}`;
        }
        // 3ë‹¨ê³„ : ë©”ëª¨ ì—¬ëŸ¬ ê°œ ì¶”ê°€
        /*
      const memo = {
        bgColor: "#F0EDCC",
        text: "ì›í•˜ëŠ” ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”. ìƒ‰ìƒê³¼ í•¨ê»˜ ì„ íƒí•˜ì„¸ìš”. ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš”",
      };
      
      */ // í•´ë‹¹ ê°ì²´ê°€ ë°°ì—´ì´ ë˜ì–´ì•¼ í•œë‹¤! (ì—¬ëŸ¬ ê°œê°€ ë˜ë ¤ë©´)

        const memoData = [
          // ë°°ì—´ë¡œ ë³€ê²½
          {
            bgColor: goodBgColor(),
            text: "ì›í•˜ëŠ” ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”. ìƒ‰ìƒê³¼ í•¨ê»˜ ì„ íƒí•˜ì„¸ìš”. ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš”",
          },
        ];

        function drawMemo() {
          // #viewë¥¼ ì°¾ì•„ì„œ memoì˜ bgColorë¥¼ ë°°ê²½ìƒ‰ìœ¼ë¡œ í•˜ê³ 
          // textë¥¼ textContentë¡œ í•˜ëŠ” divë¥¼ ë§Œë“œëŠ” í•¨ìˆ˜
          const view = document.querySelector("#view");
          view.innerHTML = ""; // ë¦¬ì…‹
          /*
        view.innerHTML = `<div class="memo-box">${memo.text}</div>`;
        // CSSì˜ í”„ë¡œí¼í‹° -> jsì˜ ê°ì²´
        const memoElement = view.querySelector(".memo-box");
        memoElement.style.backgroundColor = memo.bgColor;
        memoElement.style.padding = "10px";
        */

          for (const memo of memoData) {
            const memoElement = document.createElement("div");
            memoElement.classList.add("memo-box");
            memoElement.textContent = memo.text;
            memoElement.style.backgroundColor = memo.bgColor;
            memoElement.style.padding = "10px";
            view.appendChild(memoElement);

            // 4ë‹¨ê³„ : ë©”ëª¨ ì‚­ì œí•˜ê¸°
            // ì‚­ì œ ë²„íŠ¼ì„ ì¶”ê°€
            const deleteButton = document.createElement("button"); // íƒœê·¸
            deleteButton.textContent = "ì‚­ì œ"; // í…ìŠ¤íŠ¸
            deleteButton.addEventListener("click", () => {
              memoData.splice(memoData.indexOf(memo), 1); // memoData ë°°ì—´ì—ì„œ í•´ë‹¹ ë©”ëª¨ ì‚­ì œ
              memoElement.remove(); // removeëŠ” í•´ë‹¹ dom ê°ì²´ë¥¼ (ìê¸°ìì‹ ) ì‚­ì œ.
            }); // í•¨ìˆ˜ ê°ì²´ (í™”ì‚´í‘œ í•¨ìˆ˜)
            memoElement.appendChild(deleteButton);
          }
        }

        const controller = document.querySelector("#controller");
        // btnì„ ëˆ„ë¥´ë©´ ì œì¶œ, ì œì¶œì— ëŒ€í•œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        controller.addEventListener(
          "submit", // í˜¸ì´ìŠ¤íŒ…, handleForm ì˜¤ë¥˜X
          function (event) {
            // íƒ€ì… ì¶”ë¡ 
            // #controllerì— listnerë¡œ ë“±ë¡í•  handler, prevent default. (form ê¸°ë³¸ ì œì¶œ)
            // formì— ìˆëŠ” text, color -> memoë¥¼ ìˆ˜ì •
            event.preventDefault(); // ê¸°ë³¸ ì œì¶œì„ ë§‰ìŒ. ì£¼ì†Œ ë’¤ì— `?`ê°€ ì•ˆ ë¶™ëŠ”ë‹¤!
            const form = new FormData(controller);
            const memo = {}; // ì„ì‹œë¡œ ë§Œë“ ë‹¤ // ì´ ê°’ì´ ìœ„ì˜ memoDataì— ë“¤ì–´ê°€ì•¼ë¨
            // console.log(...form.entries);
            memo.text = form.get("memoText");
            memo.bgColor = form.get("memoBgColor");
            memoData.push(memo);

            drawMemo();
          }
        );
        drawMemo();
      }
      onload();
    </script>
  </body>
</html>
